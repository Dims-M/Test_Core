
@{
    ViewData["Title"] = "Работа с файлами";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>

    <h1>Index Json проекта</h1>

    <ul class="navbar-nav flex-grow-1">

        <li class="nav-item">
            <a class="nav-link text-dark" asp-area="" asp-controller="Files" asp-action="SetFasilSample1">Получить файл с помощью масссива байтов формате</a>
        </li>
    </ul>

    <ul class="navbar-nav flex-grow-1">

        <li class="nav-item">
            <a class="nav-link text-dark" asp-area="" asp-controller="Files" asp-action="SetFasilSampFileStreamle2">Получить файл с помощью Потока FileStream формате</a>
        </li>
    </ul>

    <ul class="navbar-nav flex-grow-1">

        <li class="nav-item">
            <a class="nav-link text-dark" asp-area="" asp-controller="Files" asp-action="SetFasilPhysicalFileStreamle3">Получить файл с прямой ссылкой </a>
        </li>
    </ul>

    <p>
        <a asp-action="ClientInfo">Получть данные. В строке. В новом окне</a> @*// кнопка*@
    </p>

    <button id="button">Получть данные. И Заполнить</button>

    <p>Id: <span id="idspan"></span></p>
    <p>Login: <span id="loginspan"></span></p>
    <p>Email: <span id="emailspan"></span></p>

    <script>
        let btn = document.querySelector("#button");
        let xhr = new XMLHttpRequest();

        btn.addEventListener("click", () => {
            xhr.open("GET", "/json/clientinfo"); /*// получаем строку jsona из контролера с помощью гет запроса*/
            xhr.onload = () => {
                let response = JSON.parse(xhr.response);
                document.querySelector("#idspan").innerHTML = response.id;
                document.querySelector("#loginspan").innerHTML = response.login;
                document.querySelector("#emailspan").innerHTML = response.email;
            }
            xhr.send();
        })
    </script>
</body>
</html>
